

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Started &mdash; KiDS-GGL 2.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="KiDS-GGL ESD Production" href="esd-production/index.html" />
    <link rel="prev" title="Welcome to KiDS-GGL’s documentation!" href="index.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> KiDS-GGL
          

          
          </a>

          
            
            
              <div class="version">
                2.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#measure-the-lensing-signal">Measure the lensing signal</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fit-the-data-with-a-halo-model">Fit the data with a halo model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generate-mock-data">Generate mock data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python-modules">Python modules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#acknowledgements">Acknowledgements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="esd-production/index.html">KiDS-GGL ESD Production</a></li>
<li class="toctree-l1"><a class="reference internal" href="halomodel/index.html">KiDS-GGL Halo Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">KiDS-GGL References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">KiDS-GGL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Getting Started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/getting-started.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>To get started, clone or fork <code class="docutils literal notranslate"><span class="pre">kids_ggl</span></code> from the github repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">KiDS</span><span class="o">-</span><span class="n">WL</span><span class="o">/</span><span class="n">KiDS</span><span class="o">-</span><span class="n">GGL</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>or download <a class="reference external" href="https://github.com/KiDS-WL/KiDS-GGL/releases/latest">the latest stable version</a> and unpack,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tar</span> <span class="n">xvf</span> <span class="n">KiDS</span><span class="o">-</span><span class="n">GGL</span><span class="o">-&lt;</span><span class="n">version</span><span class="o">&gt;.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unzip</span> <span class="n">KiDS</span><span class="o">-</span><span class="n">GGL</span><span class="o">-&lt;</span><span class="n">version</span><span class="o">&gt;.</span><span class="n">zip</span>
</pre></div>
</div>
<p>where, for instance, <code class="docutils literal notranslate"><span class="pre">&lt;version&gt;=2.0.0</span></code>.</p>
<p>Enter the folder where the pipeline is located and run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
<p>If you are not using Anaconda, you may have to add a <code class="docutils literal notranslate"><span class="pre">--user</span></code> flag to the above if you do not have root privileges (though we
absolutely recommend using Anaconda).</p>
<p>The commands above will also install some additional packages required by the pipeline: <code class="docutils literal notranslate"><span class="pre">astropy&gt;=1.2.0</span></code> for astronomical
utilities (e.g., constants and units), <code class="docutils literal notranslate"><span class="pre">emcee&gt;=2.1.0</span></code> for MCMC, <code class="docutils literal notranslate"><span class="pre">hmf&gt;=3.0.1</span></code> for halo mass function utilities, <code class="docutils literal notranslate"><span class="pre">mpmath&gt;=0.19</span></code>
for mathematical utilities, and <code class="docutils literal notranslate"><span class="pre">numpy&gt;=1.5.0</span></code>. Optionally, if you want to use the CAMB transfer functions in your halo models
(preferred method), you should also install CAMB using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">egg</span> <span class="n">camb</span>
</pre></div>
</div>
<p>After the setup script has finished, you should have a copy of the <code class="docutils literal notranslate"><span class="pre">kids_ggl</span></code> executable somewhere in your <code class="docutils literal notranslate"><span class="pre">PATH</span></code>, which means
you can run it out-of-the-box from anywhere in your computer. To make sure, type</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">which</span> <span class="n">kids_ggl</span>
</pre></div>
</div>
<p>If you do not see any message it means the place where the executable is is not part of your <code class="docutils literal notranslate"><span class="pre">PATH</span></code>. To fix this, look through the
installation messages where the file was placed and add the following statement to your <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> or <code class="docutils literal notranslate"><span class="pre">~/.bash_profile</span></code> if
your terminal shell is <code class="docutils literal notranslate"><span class="pre">bash</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export PATH=${PATH}:&lt;path_to_kids_ggl_folder&gt;
</pre></div>
</div>
<p>or the following in your <code class="docutils literal notranslate"><span class="pre">~/.cshrc</span></code> or <code class="docutils literal notranslate"><span class="pre">~/.tcshrc</span></code> if your shell is set to <code class="docutils literal notranslate"><span class="pre">csh</span></code> or <code class="docutils literal notranslate"><span class="pre">tcsh</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>setenv PATH ${PATH}:&lt;path_to_kids_ggl_folder&gt;
</pre></div>
</div>
<p>You can run a quick example by typing</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kids_ggl</span> <span class="o">-</span><span class="n">c</span> <span class="n">demo</span><span class="o">/</span><span class="n">ggl_demo_nfw_stack</span><span class="o">.</span><span class="n">txt</span> <span class="o">--</span><span class="n">sampler</span> <span class="o">--</span><span class="n">demo</span>
</pre></div>
</div>
<p>This should show three panels with data points and lines resembling the Early Science satellite galaxy-galaxy lensing results of
Sifon et al. (2015) and, after closing it, show the 3x3x14x14 covariance matrix.</p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">kids_ggl</span></code> requires a configuration file to run, and there are two kinds of configuration files required, depending on the task
you ask from it: one for the <a class="reference external" href="esd-production/index.html">production of a lensing signal</a> and one if you want to <a class="reference external" href="halomodel/index.html">calculate and
sample halo model predictions</a>.</p>
<div class="section" id="measure-the-lensing-signal">
<h3>Measure the lensing signal<a class="headerlink" href="#measure-the-lensing-signal" title="Permalink to this headline">¶</a></h3>
<p>You can use <code class="docutils literal notranslate"><span class="pre">kids_ggl</span></code> to measure the lensing signal from the KiDS data simply by typing</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kids_ggl</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">esd_config_file</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">esd</span>
</pre></div>
</div>
<p>In order to do this, you need either the <a class="reference external" href="esd-production/input-data.html">right set of files in your computer</a> or to do it from
one of the <a class="reference external" href="esd-production/input-data.html#servers">KiDS servers</a>.</p>
</div>
<div class="section" id="fit-the-data-with-a-halo-model">
<h3>Fit the data with a halo model<a class="headerlink" href="#fit-the-data-with-a-halo-model" title="Permalink to this headline">¶</a></h3>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">kids_ggl</span></code> to generate halo model predictions for the lensing signal and to fit lensing data with a halo model.
This functionality is activated with the <code class="docutils literal notranslate"><span class="pre">--sampler</span></code> flag. In order to fit a halo model to data, type</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kids_ggl</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">model_config_file</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">sampler</span>
</pre></div>
</div>
<p>while if you simply want to generate halo model predictions for a single set of halo model parameters (those provided in the
configuration file), type</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kids_ggl</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">model_config_file</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">sampler</span> <span class="o">--</span><span class="n">demo</span>
</pre></div>
</div>
<p>The line above will generate the ESD(s) for your chosen set of initial parameters, print <span class="math notranslate nohighlight">\(\chi^2/\mathrm{dof}\)</span> on screen,
overplot the model to the data points and, once you close this plot, will display the full covariance matrix.</p>
<p>Sometimes, after running the demo a couple times, you don’t really need to see the covariance matrix every time you run the demo.
You can run the demo without plotting the covariance with</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kids_ggl</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">config_file</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">sampler</span> <span class="o">--</span><span class="n">demo</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">cov</span>
</pre></div>
</div>
<p>the <code class="docutils literal notranslate"><span class="pre">--no-cov</span></code> option is ignored if <code class="docutils literal notranslate"><span class="pre">--demo</span></code> is not present.</p>
<p>By default, if the MCMC output file exists <code class="docutils literal notranslate"><span class="pre">kids_ggl</span></code> will ask the user whether they want to overwrite the output. Since version
<code class="docutils literal notranslate"><span class="pre">2.0.0</span></code>, you can force overwrite by writing</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kids_ggl</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">config_file</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">sampler</span> <span class="o">-</span><span class="n">f</span>
</pre></div>
</div>
</div>
<div class="section" id="generate-mock-data">
<h3>Generate mock data<a class="headerlink" href="#generate-mock-data" title="Permalink to this headline">¶</a></h3>
<p>Finally, you can also use <code class="docutils literal notranslate"><span class="pre">kids_ggl</span></code> to generate mock data, based on the parameters entered in the configuration file, by typing</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kids_ggl</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">config_file</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">mock</span>
</pre></div>
</div>
<p>For now, doing this will save the output into a <code class="docutils literal notranslate"><span class="pre">mock/</span></code> folder, with the file names containing some information about the
quantities calculated. These files are ready to be fed into <code class="docutils literal notranslate"><span class="pre">kids_ggl</span></code> for halo model fitting, for instance.</p>
<p><em>IMPORTANT</em>: mock covariance calculation has not yet been implemented. The <code class="docutils literal notranslate"><span class="pre">kids_ggl</span></code> MCMC sampler requires a covariance
matrix to work.</p>
</div>
<div class="section" id="python-modules">
<h3>Python modules<a class="headerlink" href="#python-modules" title="Permalink to this headline">¶</a></h3>
<p>After following the installation steps above you will also be able to import any component of the KiDS-GGL pipeline as <code class="docutils literal notranslate"><span class="pre">python</span></code>
modules for use within your own code. For instance, to access the different density profiles (currently all based on modifications
of the NFW profile) and their associated quantities (such as mass, lensing signal, etc), you may type</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kids_ggl_pipeline.halomodel</span> <span class="k">import</span> <span class="n">nfw</span>
</pre></div>
</div>
<p>Most functionality should have a working help page, accessed by typing in a <code class="docutils literal notranslate"><span class="pre">python</span></code> shell (or Jupyter notebook, etc):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">nfw</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="acknowledgements">
<h2>Acknowledgements<a class="headerlink" href="#acknowledgements" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference external" href="references.html">References</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="esd-production/index.html" class="btn btn-neutral float-right" title="KiDS-GGL ESD Production" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to KiDS-GGL’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, KiDS-GGL for the KiDS Collaboration

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'2.0.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>